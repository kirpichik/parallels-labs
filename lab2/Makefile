# Compiler
CC=cc

# Compiler flags
INCLUDES=
CFLAGS=-Wall -std=gnu99 -O2 $(INCLUDES)
TYPE_SIZE_FLAG=-D_TYPE_SIZE
LDFLAGS=

# Sources
SOURCES=main.c

# Compiler output
EXECUTABLE=mem-test

all: $(EXECUTABLE)-1 $(EXECUTABLE)-2 $(EXECUTABLE)-4 $(EXECUTABLE)-8 $(EXECUTABLE)-16 $(EXECUTABLE)-32

$(EXECUTABLE)-1: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=1 $(SOURCES) -o $@ $(LDFLAGS)

$(EXECUTABLE)-2: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=2 $(SOURCES) -o $@ $(LDFLAGS)

$(EXECUTABLE)-4: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=4 $(SOURCES) -o $@ $(LDFLAGS)

$(EXECUTABLE)-8: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=8 $(SOURCES) -o $@ $(LDFLAGS)

$(EXECUTABLE)-16: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=16 $(SOURCES) -o $@ $(LDFLAGS)

$(EXECUTABLE)-32: $(SOURCES)
	$(CC) $(CFLAGS) $(TYPE_SIZE_FLAG)=32 $(SOURCES) -o $@ $(LDFLAGS)

clean:
	rm -rf $(EXECUTABLE)-*

clear: clean

rebuild: clean all
